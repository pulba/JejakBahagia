---
import Noheader from '../layouts/noheader.astro';
import { Icon } from 'astro-iconify';
import "@splidejs/splide/css";
---

<Noheader title="Pesan">
  <section class="relative overflow-hidden">
    <div class="container mx-auto py-16 px-6">
      <div class="flex flex-col md:flex-row gap-12 max-w-screen-md mx-auto">
        <div class="w-full h-44 md:h-[75vh] bg-cover bg-center rounded-2xl" style="background-image: url(/assets/img-28.webp);">
        </div>
        <form id="sendMessage" class="w-full">
          <div id="page1" class="page">
            <div class="w-full space-y-4">
              <h1 class="font-josefin text-5xl text-blue-600">Let's get started </h1>
              <p class="font-poppins text-lg text-gray-500 mx-auto">Harap isi formulir untuk melanjutkan pemesanan.</p>
              <p class="font-poppins mx-auto capitalize font-bold text-lg text-gray-800">informasi Pemesan<sup class="text-blue-600">*</sup></p>
              <div class="grid max-[350px]:grid-cols-1 grid-cols-2 gap-4 *:w-full *:p-3 *:rounded-md *:w-full *:border-b-2 *:bg-transparent focus:*:outline-none focus:*:ring focus:*:ring-0">
                <input id="username" name="username" required type="text" placeholder="Nama Pemesan"/>
                <input id="email" name="email" required type="email" placeholder="Email Pemesan"/>
                <input id="whatsapp" name="whatsapp" required type="tel" placeholder="No Whatsapp"/>
              </div>
            </div>
            <p class="font-poppins pt-8 mx-auto capitalize font-bold text-lg">Pilih  Tema Undangan<sup class="text-blue-600">*</sup></p>
            <select id="theme" class="p-3 rounded-md w-full border-b-2 bg-transparent focus:outline-none focus:ring focus:ring-0">
              <option selected hidden>Pilih Tema</option>
              <option value="Basic 01">Tema 01</option>
              <option value="Basic 02">Tema 02</option>
              <option value="Basic 03">Tema 03</option>
              <option value="Basic 04">Tema 04</option>
              <option value="Basic 05">Tema 05</option>
              <option value="Basic 06">Tema 06</option>
              <option value="Basic 07">Tema 07</option>
              <option value="Basic 08">Tema 08</option>
              <option value="Basic 09">Tema 09</option>
              <option value="Basic 10">Tema 10</option>
            </select>
          </div>
          <div id="page2" class="page hidden">
            <p class="font-poppins mx-auto capitalize font-bold text-lg text-gray-800">Mempelai Pria<sup class="text-blue-600">*</sup></p>
            <p class="font-poppins mx-auto capitalize text-xs italic text-gray-600">Sertakan gelar jika ada</p>
            <div class="grid grid-cols-1 gap-4 *:p-3 *:rounded-md *:w-full *:border-b-2 *:bg-transparent focus:*:outline-none focus:*:ring focus:*:ring-0">
              <input id="maleFullname" class="data" name="maleFullname" type="text" placeholder="Nama Lengkap"/>
              <input id="male" class="data" type="text" name="male" placeholder="Nama Panggilan"/>
              <input id="maleFather" class="data" class="data" name="maleFather" type="text" placeholder="Nama Bapak"/>
              <input id="maleMother" class="data" name="maleMother" type="text" placeholder="Nama Ibu"/>
              <input id="maleChild" class="data" name="maleChild" type="tel" placeholder="Anak ke"/>
              <input id="maleIg" class="data" name="maleIg" type="text" placeholder="Akun Instagram (@)"/>
            </div>
          </div>
          <div id="page3" class="page hidden">
            <p class="font-poppins mx-auto capitalize font-bold text-lg text-gray-800">Mempelai Wanita<sup class="text-blue-600">*</sup></p>
            <p class="font-poppins mx-auto capitalize text-xs italic text-gray-600">Sertakan gelar jika ada</p>
            <div class="grid grid-cols-1 gap-4 *:p-3 *:rounded-md *:w-full *:border-b-2 *:bg-transparent focus:*:outline-none focus:*:ring focus:*:ring-0">
              <input id="femaleFullname" class="data" name="femaleFullname" type="text" placeholder="Nama Lengkap"/>
              <input id="female" class="data" name="female" type="text" placeholder="Nama Panggilan"/>
              <input id="femaleFather" class="data" name="femaleFather" type="text" placeholder="Nama Bapak"/>
              <input id="femaleMother" class="data" name="femaleMother" type="text" placeholder="Nama Ibu"/>
              <input id="femaleChild" class="data" name="femaleChild" type="tel" placeholder="Anak ke"/>
              <input id="femaleIg" class="data" name="femaleIg" type="text" placeholder="Akun Instagram (@)"/>
            </div>
          </div>
          <div id="page4" class="page hidden">
            <p class="font-poppins mx-auto capitalize font-bold text-lg text-gray-800">Akad Nikah<sup class="text-blue-600">*</sup></p>
            <div class="grid grid-cols-1 gap-4 *:p-3 *:rounded-md *:w-full *:border-b-2 *:bg-transparent focus:*:outline-none focus:*:ring focus:*:ring-0">
              <input id="date" class="data" name="date" type="date" />
              <input id="time" class="data" name="time" type="text" placeholder="08:00 WIB - 10:00 WIB"/>
              <input id="address" class="data" name="address" type="text" placeholder="Alamat Lengkap"/>
              <input id="maps" class="data" name="maps" type="text" placeholder="Link Google Maps"/>
            </div>
          </div>
          <div id="page5" class="page hidden">
            <p class="font-poppins mx-auto capitalize font-bold text-lg text-gray-800">Resepsi Pernikahan<sup class="text-blue-600">*</sup></p>
            <div class="grid grid-cols-1 gap-4 *:p-3 *:rounded-md *:w-full *:border-b-2 *:bg-transparent focus:*:outline-none focus:*:ring focus:*:ring-0">
              <input id="dateSc" class="data" name="datesc" type="date" />
              <input id="timeSc" class="data" name="timesc" type="text" placeholder="08:00 WIB - 10:00 WIB"/>
              <input id="addressSc" class="data" name="addresssc" type="text" placeholder="Alamat Lengkap"/>
              <input id="mapsSc" class="data" name="mapssc" type="text" placeholder="Link Google Maps"/>
            </div>
          </div>
          <div id="page6" class="page hidden">
            <p class="font-poppins mx-auto capitalize font-bold text-lg text-gray-800">Amplop Digital  <br><span class="italic">(Bank, No. Rekening, Penerima)</span></p>
            <div class="grid grid-cols-1 gap-4 mt-2 *:p-3 *:rounded-md *:w-full *:border-b-2 *:bg-transparent focus:*:outline-none focus:*:ring focus:*:ring-0">
              <input id="bank" class="data" name="bank" type="tel" placeholder="BCA 12345678 a/n Mempelai"/>
              <input id="ewallet" class="data" name="ewallet" type="tel" placeholder="GOPAY 12345678 a/n Mempelai"/>
            </div>
          </div>
          <div id="page7" class="page hidden space-y-3">
            <p class="font-poppins mx-auto capitalize font-bold text-lg text-gray-800">Foto / Gallery</p>
            <div class="*:p-3 *:rounded-md *:w-full *:border-b-2 *:bg-transparent focus:*:outline-none focus:*:ring focus:*:ring-0">
              <input id="photo" class="data" name="photo" type="text" placeholder="Link Google Drive/kirim WA"/>
            </div>
            <p class="font-poppins mx-auto capitalize font-bold text-lg text-gray-800">Quote</p>
            <div class="*:p-3 *:rounded-md *:w-full *:border-b-2 *:bg-transparent focus:*:outline-none focus:*:ring focus:*:ring-0">
              <textarea id="quote" rows="4" name="content" class="mt-2 block mt-2 p-5 w-full text-sm text-gray-800 bg-gray-50 rounded-lg border border-gray-300 focus:outline-none" placeholder="Bisa kirim Whatsapp"></textarea>
            </div>
            <p class="font-poppins mx-auto capitalize font-bold text-lg text-gray-800">Pilihan Lagu</p>
            <div class="*:p-3 *:rounded-md *:w-full *:border-b-2 *:bg-transparent focus:*:outline-none focus:*:ring focus:*:ring-0">
              <input id="music" class="data" name="music" type="text" placeholder="Link Youtube"/>
            </div>
          </div>
          <div class="flex flex-row justify-center items-center pt-12 flex flex-row gap-4">
            <button id="backBtn" type="button" class="hidden py-2 px-6 rounded-full bg-gray-800 text-white w-max">Kembali</button>
            <button id="nextBtn" type="submit" class="py-2 px-6 rounded-full bg-blue-600 text-white w-max">Lanjut</button>
            <button id="sendBtn" type="submit" class="hidden py-2 px-6 rounded-full bg-blue-600 text-white w-max">Kirim</button>
          </div>
        </form>
      </div>
      <div class="w-full flex max-[350px]:flex-col gap-4 flex-row justify-between max-w-screen-md mx-auto mt-16">
        <a href="/">
          <div class="py-2 px-4 rounded-full bg-gray-800 text-white w-max flex flex-row gap-[1px]"><Icon name="mdi:home" class="h-5 w-5" />Home</div>
        </a>
        <a href="https://wa.me/6281532094978?text=Hallo Admin, saya ingin bertanya tentang *Undangan Digital* dong!" class="w-fit py-2 px-4 rounded-full bg-gray-800 flex flex-row items-center justify-center gap-[1px] text-center text-white"><Icon name="mdi:whatsapp" class="w-5 h-5 text-white" />Tanya Admin</a>
      </div>
    </div>
  </section>

  <script>

document.getElementById('sendMessage').addEventListener('submit', function(e) {
        e.preventDefault(); 
        sendMessage(); 
        location.reload(); 
    });
    // elemen tombol
      const backBtn = document.getElementById('backBtn');
      const nextBtn = document.getElementById('nextBtn');
      const sendBtn = document.getElementById('sendBtn');
      const pages = document.querySelectorAll('.page');

      let currentPage = 0;

      backBtn.classList.add('hidden');

      backBtn.addEventListener('click', function() {
    if (currentPage > 0) {
        // Check if there are any required inputs with empty values
        const requiredInputs = document.querySelectorAll('[required]');
        let requiredEmpty = false;
        requiredInputs.forEach(input => {
            if (!input.value.trim()) {
                requiredEmpty = true;
                // Remove the 'required' attribute
                input.removeAttribute('required');
            }
        });

        if (!requiredEmpty) {
            // Proceed with going back to the previous page
            pages[currentPage].classList.add('hidden');
            currentPage--;
            pages[currentPage].classList.remove('hidden');

            if (currentPage === 0) {
                backBtn.classList.add('hidden');
            }
            nextBtn.classList.remove('hidden');
            sendBtn.classList.add('hidden');
        }
    }
});


    nextBtn.addEventListener('click', function() {
        
          const sendMessage = document.getElementById('sendMessage');
          console.log(sendMessage.checkValidity());
          if (sendMessage.checkValidity()) {
            pages[currentPage].classList.add('hidden');
              currentPage++;
              pages[currentPage].classList.remove('hidden');
              backBtn.classList.remove('hidden');
              

            const dataList = document.querySelectorAll('.data');
            dataList.forEach(element => {
              if (element.offsetParent !== null && window.getComputedStyle(element).display !== 'none') {
              element.setAttribute("required", "");
              }
            });
            if (currentPage === pages.length - 1) {
                  nextBtn.classList.add('hidden');
                  sendBtn.classList.remove('hidden');
              }
          }
          
      });


      //send form
      function sendMessage() {
        const username = document.getElementById('username').value;
        const email = document.getElementById('email').value;
        const whatsapp = document.getElementById('whatsapp').value;
        const theme = document.getElementById('theme').value;

        const maleFullname = document.getElementById('maleFullname').value;
        const male = document.getElementById('male').value;
        const maleFather = document.getElementById('maleFather').value;
        const maleMother = document.getElementById('maleMother').value;
        const maleChild = document.getElementById('maleChild').value;
        const maleIg = document.getElementById('maleIg').value;

        const femaleFullname = document.getElementById('femaleFullname').value;
        const female = document.getElementById('female').value;
        const femaleFather = document.getElementById('femaleFather').value;
        const femaleMother = document.getElementById('femaleMother').value;
        const femaleChild = document.getElementById('femaleChild').value;
        const femaleIg = document.getElementById('femaleIg').value;

        const date = document.getElementById('date').value;
        const time = document.getElementById('time').value;
        const address = document.getElementById('address').value;
        const maps = document.getElementById('maps').value;

        const dateSc = document.getElementById('dateSc').value;
        const timeSc = document.getElementById('timeSc').value;
        const addressSc = document.getElementById('addressSc').value;
        const mapsSc = document.getElementById('mapsSc').value;

        const bank = document.getElementById('bank').value;
        const ewallet = document.getElementById('ewallet').value;
        const photo = document.getElementById('photo').value;
        const quote = document.getElementById('quote').value;
        const music = document.getElementById('music').value;

        const url = "https://api.whatsapp.com/send?phone=6281532094978&text=Hallo%20admin%20JejakBahagia%20saya%20mau%20buat%20undangan%20digital%20dengan%0A%0ANama%20Pemesan%3A%20*"+ username +"*%0AE-mail%3A%20*"+ email +"*%0ANo%20Whatsapp%3A%20*"+ whatsapp +"*%0APilihan%20Tema%3A%20*"+ theme +"*%0A%0ABerikut%20data%20pemesanan%20undangan%20digital%20%3A%0A*Penganti%20Pria*%0ANama%20Lengkap%3A%20*"+ maleFullname +"*%0ANama%20Panggilan%3A%20*"+ male +"*%0ANama%20Bapak%3A%20*"+ maleFather +"*%0ANama%20Ibu%3A%20*"+ maleMother +"*%0AAnak%20ke%3A%20*"+ maleChild +"*%0AAkun%20Instagram%3A%20*"+ maleIg +"*%0A%0A*Penganti%20Wanita*%0ANama%20Lengkap%3A%20*"+ femaleFullname +"*%0ANama%20Panggilan%3A%20*"+ female +"*%0ANama%20Bapak%3A%20*"+ femaleFather +"*%0ANama%20Ibu%3A%20*"+ femaleMother +"*%0AAnak%20ke%3A%20*"+ femaleChild +"*%0AAkun%20Instagram%3A%20*"+ femaleIg +"*%0A%0A*Akad%20Nikah*%0AHari%20dan%20Tanggal%20Acara%3A%20*"+ date +"*%0AWaktu%3A%20*"+ time +"*%0AAlamat%3A%20*"+ address +"*%0ALink%20Maps%3A%20*"+ maps +"*%0A%0A*Resepsi%20Nikah*%0AHari%20dan%20Tanggal%20Acara%3A%20*"+ dateSc +"*%0AWaktu%3A%20*"+ timeSc +"*%0AAlamat%3A%20*"+ addressSc +"*%0ALink%20Maps%3A%20*"+ mapsSc +"*%0A%0A*Amplop%20Digital*%0ARekening%3A%20*"+ bank +"*%0AE-Wallet%3A%20*"+ ewallet +"*%0A%0A%0A*Foto%20Prewedding*%0ALink%20Foto%20Prewedding%3A%20*"+ photo+"*%0A%0A*Music*%0ALink%20Musik%3A%20*"+ music +"*%0A%0A%0A*Love%20Story*%0AStory%3A%20*"+ quote +"*"

        window.open(url);
      }

</script>
</Home>